DECLARE @Код string = "MS-10"; -- корневая группа

WITH RecursiveQuery AS
(
   SELECT Ссылка, Родитель, Код, Код AS КодРодителя, Наименование  --, 0 AS Уровень
     FROM Справочник.Номенклатура
  WHERE Код = @Код

   UNION ALL

   SELECT child.Ссылка, child.Родитель, child.Код, parent.Код, child.Наименование  --, parent.Уровень + 1
     FROM Справочник.Номенклатура AS child
   INNER JOIN RecursiveQuery AS parent ON parent.Ссылка = child.Родитель
)
SELECT КодРодителя КАК Родитель, Код, Наименование, Ссылка --, Уровень
  FROM RecursiveQuery
ORDER BY Родитель, Код;