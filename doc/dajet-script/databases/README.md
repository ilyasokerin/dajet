## DaJet Script

[Начало](https://github.com/zhichkin/dajet/tree/main/doc/dajet-script/README.md)

### Реляционные базы данных

DaJet Script поддерживает работу с базами данных 1С:Предприятие 8 под управлением СУБД Microsoft SQL Server или PostgreSQL. При этом нужно отметить, что имеется ввиду специальная [сборка PostgreSQL для 1С](https://v8.1c.ru/tekhnologii/systemnye-trebovaniya-1s-predpriyatiya-8/subd-postgresql/). Существенным отличием этой сборки PostgreSQL от стандартной является использование 1С строкового пользовательского типа данных ```mchar``` и ```mvarchar```. Возможно имеются и другие отличия, которые для работы DaJet Script не имеют значения.

DaJet Script поддерживает работу со следующими объектами 1С:Предприятие 8:
- Свойства конфигурации
- Общие реквизиты
- Определяемые типы
- Планы видов характеристик
- Перечисления
- Справочники
- Документы
- Планы обмена (плюс таблицы регистрации изменений)
- Регистры сведений (плюс таблицы настроек и итогов)
- Регистры накопления (плюс таблицы настроек и итогов)

Язык запросов DaJet Script позволяет обращаться к таблицам 1С:Предприятие 8 в терминах этой платформы. Синтаксис универсализирован, аналогично языку запросов 1С, то есть он не зависит от типа СУБД. Тем не менее, в отличие от языка запросов 1С, DaJet Script дополнительно реализует следующие стандартные возможности SQL:
- коррелированные подзапросы
- общие табличные выражения
- рекурсивные запросы
- оконные (аналитические) функции
- латеральные (боковые) соединения
- DML команды (INSERT, UPDATE, DELETE)
- вызов хранимых процедур базы данных
- дополнительные полезные функции SQL

Кроме этого, DaJet Script дополняет язык запросов своими специфическими командами, реализуя логику потоковой обработки и обмена данными, например, STREAM и CONSUME. Более того, в одном скрипте DaJet Script возможно обращение к нескольким базам данных, в том числе расположенных на разных серверах и находящихся под управлением различных СУБД.

[Наверх](#реляционные-базы-данных)

- SELECT
  - Табличные операторы
    - JOIN, UNION, APPLY
    - Подзапросы
  - Общие табличные выражения
    - Обычные и рекурсивные запросы
  - Временные таблицы
  - Агрегатные функции
    - SUM, MAX, MIN, AVG, COUNT, STRING_AGG
  - Оконные функции OVER
    - SUM, MAX, MIN, AVG, COUNT
    - ROW_NUMBER, LAG, LEAD, FIRST_VALUE, LAST_VALUE
  - Строковые функции
    - LTRIM, RTRIM, LOWER, UPPER, REPLACE, CONCAT, CONCAT_WS, SUBSTRING, CHARLENGTH
  - Прочие функции и ключевые слова
    - ISNULL, NOW, NEWUUID, DATALENGTH
    - IN, LIKE, BETWEEN, = ANY/ALL, EXISTS
    - ORDER BY...OFFSET...FETCH...
- STREAM (потоковый SELECT)
- CONSUME (деструктивный STREAM)
- INSERT
- UPDATE (обычный и потоковый)
- DELETE
- REQUEST (хранимые процедуры)
