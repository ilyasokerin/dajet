## DaJet Script

[Реляционные базы данных](https://github.com/zhichkin/dajet/tree/main/doc/dajet-script/databases/README.md)

### Регистры бухгалтерии

- [Планы счетов](#планы-счетов)
- Регистры бухгалтерии
- Таблица значений субконто

#### Планы счетов

В ниже следующем скрипте демонстрируется обращение к плану счетов "Хозрасчетный" типовой конфигурации 1С:Предприятие 8 "Бухгалтерия предприятия". Дополнительно используется обращение к табличной части "ВидыСубконто", в которой хранятся настройки признаков учёта субконто для соответствующих счетов.

> Табличная часть "ВидыСубконто" может отсутствовать если аналитический учёт по субконто не используется.

**Пример скрипта для обращения к плану счетов в запросах DaJet Script**

```SQL
DECLARE @table array -- Таблица для вывода результата запроса

USE 'mssql://server/accounting_3_0_72_72_demo'

   SELECT Порядок         = Счёт.Порядок,
          ПометкаУдаления = Счёт.ПометкаУдаления,
          Забалансовый    = Счёт.Забалансовый,
          Счёт            = Счёт.Ссылка,
          Родитель        = Счёт.Родитель,
          КодСчёта        = Счёт.Код,
          ВидСчёта        = CASE WHEN Счёт.Вид = 0 THEN 'Активный'
                                 WHEN Счёт.Вид = 1 THEN 'Пассивный'
                                 WHEN Счёт.Вид = 2 THEN 'Активный/Пассивный' END,
          Наименование    = SUBSTRING(Счёт.Наименование, 1, 20),
          ВерсияДанных    = Счёт.ВерсияДанных,
          Валютный        = Счёт.Валютный,
          Количественный  = Счёт.Количественный,
          НомерСубконто   = Субконто.НомерСтроки,
          ТипСубконто     = ТипСубконто.Наименование,
          ТолькоОбороты   = Субконто.ТолькоОбороты,
          Суммовой        = Субконто.Суммовой,
          ОбластьДанных   = Счёт.ОбластьДанныхОсновныеДанные
     INTO @table
     FROM ПланСчетов.Хозрасчетный AS Счёт
     LEFT JOIN ПланСчетов.Хозрасчетный.ВидыСубконто AS Субконто
       ON Счёт.Ссылка = Субконто.Ссылка
     LEFT JOIN ПланВидовХарактеристик.ВидыСубконтоХозрасчетные AS ТипСубконто
       ON Субконто.ВидСубконто = ТипСубконто.Ссылка
    WHERE Счёт.Код LIKE '10%'
    ORDER BY Порядок ASC

END

RETURN @table -- Вывод результата запроса в интерфейсе DaJet Studio
```

[Наверх](#регистры-бухгалтерии)
