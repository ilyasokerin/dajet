CREATE NAMESPACE РегистрНакопления;

CREATE TYPE РегистрНакопления
PRIMARY KEY Период, Регистратор, НомерЗаписи
UNIQUE INDEX Регистратор, НомерЗаписи
(
  Период      datetime,
  Регистратор Документ,
  НомерЗаписи numeric(9,0),
  Активность  boolean,
  ВидДвижения Перечисление.ВидДвиженияНакопления
);

CREATE TYPE РегистрНакопления.Продажи AS РегистрНакопления
PRIMARY KEY Номенклатура
DROP  COLUMN ВидДвижения
ALTER COLUMN Регистратор Документ.РеализацияТовара
(
  Номенклатура Справочник.Номенклатура,
  Сумма        numeric(14,2)
);

CREATE TABLE РегистрНакопления.Продажи OF РегистрНакопления.Продажи;